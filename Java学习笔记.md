# Java学习笔记



## 第二章 一切都是对象

**2.1 用引用操纵对象**

- 尽管一切都看作对象，但操纵的标识符实际上是对象的一个“引用”
- `String s; //这只是创建了引用，并不是对象`
- `String s = "hello world"; //创建一个引用的同时便进行初始化，但通常对对象采用更通用的初始化方法`

**2.2 必须由你创建对象**

- `String s = new String("hello world"); //通常用new操作符使引用和对象相关联`
- 数据的存储
  - 寄存器：最快的存储区，位于处理器的内部，数量有限，按需分配，无法人为直接控制
  - 堆栈：位于通用RAM（随机存储器），快速有效，仅次于寄存器，通过堆栈指针可以从处理器那里获得直接支持，堆栈指针向下移动，则分配新的内存，堆栈指针向上移动，则释放那些内存，Java系统必须知道存储在堆栈的所有项的生命周期，以便上下移动堆栈指针，限制了程序的灵活性，对象引用存储于堆栈中
  - 堆：一种通用的内存池（也位于RAM区），用于存放所有的Java对象，编译器不需要知道存储的数据在堆里存活多长时间，故在堆中进行存储分配十分灵活，只需要一个`new`就可以创建对象，自动在堆中进行存储分配，代价是用堆进行存储分配和清理比用堆栈需要更多时间
  - 常量存储：通常直接存放在程序代码的内部，有时也选择ROM（只读存储器）中
  - 非RAM存储：如果数据完全存活于程序之外，则可以不受程序的任何控制，如字节流，磁盘等

- 特例：*基本类型*，在程序设计中经常用到一系列数据类型，它们需要特殊对待，因为`new`将对象存储在堆里，故用`new`创建一个对象，特别是小的，简单的变量，往往不是很有效，对于这些变量Java采用和C/C++相同的方法，不用`new`创建对象，这个变量直接存储在堆栈中
  - 基本类型具有包装器类，使得可以在堆中创建一个非基本对象，用来表示对应的基本类型